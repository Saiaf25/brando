<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠ â€” ÙØ¨Ø±Ø§ÙŠØ± Ù¢Ù Ù¢Ù¦</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #FFFFFF;
    --card: #F7F8FA;
    --card-border: rgba(0,0,0,0.07);
    --text: #1A1D2B;
    --text-muted: #6B7189;
    --accent: #2563EB;
    --accent2: #E63946;
    --accent3: #059669;
    --accent4: #D97706;
    --green: #059669;
    --red: #E63946;
    --shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.03);
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Baloo Bhaijaan 2',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; padding:32px; direction:rtl; }
  .header { display:flex; align-items:baseline; gap:16px; margin-bottom:4px; }
  .header h1 { font-size:30px; font-weight:800; letter-spacing:-0.5px; color:var(--text); }
  .header span { color:var(--text-muted); font-size:14px; font-weight:500; }
  .subtitle { color:var(--text-muted); font-size:13px; margin-bottom:28px; font-weight:500; }

  .kpi-row { display:grid; grid-template-columns:repeat(auto-fit,minmax(170px,1fr)); gap:14px; margin-bottom:28px; }
  .kpi-card { background:var(--card); border:1px solid var(--card-border); border-radius:14px; padding:20px; position:relative; overflow:hidden; box-shadow:var(--shadow); }
  .kpi-card::before { content:''; position:absolute; top:0;left:0;right:0; height:3px; border-radius:14px 14px 0 0; }
  .kpi-card:nth-child(1)::before { background:var(--accent); }
  .kpi-card:nth-child(2)::before { background:var(--accent3); }
  .kpi-card:nth-child(3)::before { background:var(--accent4); }
  .kpi-card:nth-child(4)::before { background:var(--green); }
  .kpi-card:nth-child(5)::before { background:var(--red); }
  .kpi-card:nth-child(6)::before { background:#7C3AED; }
  .kpi-label { font-size:11px; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; margin-bottom:6px; font-weight:600; }
  .kpi-value { font-size:26px; font-weight:800; letter-spacing:-0.5px; }
  .kpi-sub { font-size:11px; color:var(--text-muted); margin-top:3px; font-weight:500; }

  .charts-grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:24px; }
  @media(max-width:800px){ .charts-grid{grid-template-columns:1fr;} }
  .chart-card { background:var(--card); border:1px solid var(--card-border); border-radius:14px; padding:24px; box-shadow:var(--shadow); }
  .chart-card h3 { font-size:15px; font-weight:700; margin-bottom:16px; color:var(--text); }
  .legend { display:flex; gap:16px; margin-bottom:14px; }
  .legend-item { display:flex; align-items:center; gap:6px; font-size:11px; color:var(--text-muted); font-weight:500; }
  .legend-dot { width:10px; height:10px; border-radius:3px; }

  .bar-chart { display:flex; align-items:flex-end; gap:8px; height:210px; direction:ltr; }
  .bar-group { flex:1; display:flex; flex-direction:column; align-items:center; height:100%; justify-content:flex-end; }
  .bar-val { font-size:9px; color:var(--text-muted); margin-bottom:3px; font-weight:600; white-space:nowrap; }
  .bar { width:100%; max-width:46px; border-radius:6px 6px 2px 2px; min-height:6px; }
  .bar-label { font-size:9px; color:var(--text-muted); margin-top:8px; text-align:center; line-height:1.3; font-weight:600; }

  .h-bar-chart { display:flex; flex-direction:column; gap:10px; direction:ltr; }
  .h-bar-row { display:flex; align-items:center; gap:10px; }
  .h-bar-label { font-size:11px; color:var(--text-muted); min-width:44px; text-align:right; font-weight:600; }
  .h-bar-track { flex:1; height:30px; background:rgba(0,0,0,0.04); border-radius:6px; overflow:hidden; }
  .h-bar-fill { height:100%; border-radius:6px; display:flex; align-items:center; padding-left:10px; font-size:11px; font-weight:700; color:#fff; }

  .line-chart-wrap { position:relative; height:200px; margin-top:10px; }
  .line-chart-wrap svg { width:100%; height:100%; }

  .table-card { background:var(--card); border:1px solid var(--card-border); border-radius:14px; padding:24px; overflow-x:auto; margin-bottom:24px; box-shadow:var(--shadow); }
  .table-card h3 { font-size:15px; font-weight:700; margin-bottom:14px; }
  table { width:100%; border-collapse:collapse; font-size:13px; direction:rtl; }
  thead th { text-align:right; padding:10px 12px; color:var(--text-muted); font-weight:700; font-size:11px; text-transform:uppercase; letter-spacing:0.8px; border-bottom:2px solid rgba(0,0,0,0.06); }
  tbody td { padding:11px 12px; border-bottom:1px solid rgba(0,0,0,0.04); font-weight:500; text-align:right; }
  tbody tr:last-child td { border-bottom:none; }
  tbody tr:hover { background:rgba(37,99,235,0.03); }
  .best { color:var(--green); font-weight:700; }
  .worst { color:var(--red); font-weight:700; }
  .eff-badge { display:inline-block; padding:3px 10px; border-radius:20px; font-size:11px; font-weight:700; }
  .eff-good { background:rgba(5,150,105,0.1); color:var(--green); }
  .eff-mid { background:rgba(217,119,6,0.1); color:var(--accent4); }
  .eff-bad { background:rgba(230,57,70,0.1); color:var(--red); }
  tfoot td { padding:12px 12px; text-align:right; }

  .summary-card { background:linear-gradient(135deg,#F7F8FA 0%,#EEF0F5 100%); border:1px solid var(--card-border); border-radius:14px; padding:24px; box-shadow:var(--shadow); }
  .summary-card h3 { font-size:15px; font-weight:700; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
  .summary-card ul { list-style:none; padding:0; }
  .summary-card li { color:var(--text-muted); font-size:13px; line-height:2.1; padding-right:20px; position:relative; font-weight:500; }
  .summary-card li::before { content:'â†'; position:absolute; right:0; color:var(--accent); font-weight:700; }
  .summary-card li strong { color:var(--text); }
  .tag { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:700; margin-right:4px; }
  .tag-green { background:rgba(5,150,105,0.1); color:var(--green); }
  .tag-red { background:rgba(230,57,70,0.1); color:var(--red); }
</style>
</head>
<body>
<div class="header">
  <h1>Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© â€” Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h1>
  <span>Ù¡ â€“ Ù¡Ù£ ÙØ¨Ø±Ø§ÙŠØ± Ù¢Ù Ù¢Ù¦ Â· EGP</span>
</div>
<p class="subtitle">Ø§Ù„Ø¥Ù†ÙØ§Ù‚ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† Ù…Ø¹ ØªØ­Ù„ÙŠÙ„ ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ§Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒÙØ§Ø¡Ø©</p>

<div class="kpi-row" id="kpis"></div>
<div class="charts-grid">
  <div class="chart-card">
    <h3>Ø§Ù„Ø¥Ù†ÙØ§Ù‚ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</h3>
    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background:var(--accent)"></div> Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (EÂ£)</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--accent4)"></div> Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</div>
    </div>
    <div class="bar-chart" id="spendChart"></div>
  </div>
  <div class="chart-card">
    <h3>ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ… â€” Ø§Ù„Ø£Ù‚Ù„ Ø£ÙØ¶Ù„</h3>
    <div class="h-bar-chart" id="cpmChart"></div>
  </div>
</div>
<div class="charts-grid">
  <div class="chart-card">
    <h3>Ø§Ù„Ø¥Ù†ÙØ§Ù‚ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ (EÂ£)</h3>
    <div class="line-chart-wrap" id="cumSpendChart"></div>
  </div>
  <div class="chart-card">
    <h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</h3>
    <div class="line-chart-wrap" id="cumMsgChart"></div>
  </div>
</div>
<div class="table-card">
  <h3>Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</h3>
  <table>
    <thead><tr>
      <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© (EÂ£)</th><th>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</th><th>ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„</th><th>Ø§Ù„Ø¥Ù†ÙØ§Ù‚ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</th><th>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</th><th>ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</th><th>Ø§Ù„ÙƒÙØ§Ø¡Ø©</th>
    </tr></thead>
    <tbody id="tableBody"></tbody>
    <tfoot id="tableFoot"></tfoot>
  </table>
</div>
<div class="summary-card" id="summary"></div>

<script>
const dayNames = {
  'Sat':'Ø§Ù„Ø³Ø¨Øª','Sun':'Ø§Ù„Ø£Ø­Ø¯','Mon':'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†','Tue':'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',
  'Wed':'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Thu':'Ø§Ù„Ø®Ù…ÙŠØ³','Fri':'Ø§Ù„Ø¬Ù…Ø¹Ø©'
};

const days = [
  { date:'Ù¡ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø³Ø¨Øª', spend:1006.44, leads:15 },
  { date:'Ù¢ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø£Ø­Ø¯', spend:1545.37, leads:26 },
  { date:'Ù£ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', spend:839.25,  leads:17 },
  { date:'Ù¤ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', spend:1526.84, leads:24 },
  { date:'Ù¥ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', spend:1799.86, leads:15 },
  { date:'Ù¦ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø®Ù…ÙŠØ³', spend:2273.04, leads:25 },
  { date:'Ù§ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø¬Ù…Ø¹Ø©', spend:1989.62, leads:21 },
  { date:'Ù¨ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø³Ø¨Øª', spend:2436.46, leads:22 },
  { date:'Ù© ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø£Ø­Ø¯', spend:2571.32, leads:37 },
  { date:'Ù¡Ù  ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', spend:2451.57, leads:29 },
  { date:'Ù¡Ù¡ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', spend:2479.55, leads:27 },
  { date:'Ù¡Ù¢ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', spend:2369.63, leads:22 },
  { date:'Ù¡Ù£ ÙØ¨Ø±Ø§ÙŠØ±', day:'Ø§Ù„Ø®Ù…ÙŠØ³', spend:2234.19, leads:35 },
];

const totalSpend = days.reduce((s,d)=>s+d.spend,0);
const totalLeads = days.reduce((s,d)=>s+d.leads,0);
const avgCPL = totalSpend / totalLeads;
const cpls = days.map(d=>d.spend/d.leads);
const bestCPL = Math.min(...cpls);
const worstCPL = Math.max(...cpls);
const bestIdx = cpls.indexOf(bestCPL);
const worstIdx = cpls.indexOf(worstCPL);
const avgDailySpend = totalSpend / days.length;
const avgDailyLeads = totalLeads / days.length;

let cumSpend=[], cumLeads=[], runningCPL=[];
days.forEach((d,i)=>{
  cumSpend.push((cumSpend[i-1]||0)+d.spend);
  cumLeads.push((cumLeads[i-1]||0)+d.leads);
  runningCPL.push(cumSpend[i]/cumLeads[i]);
});

const P=v=>`EÂ£ ${v.toLocaleString('en',{minimumFractionDigits:2,maximumFractionDigits:2})}`;
const P0=v=>`EÂ£ ${v.toLocaleString('en',{minimumFractionDigits:0,maximumFractionDigits:0})}`;

document.getElementById('kpis').innerHTML = `
  <div class="kpi-card"><div class="kpi-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ù†ÙØ§Ù‚</div><div class="kpi-value">${P0(totalSpend)}</div><div class="kpi-sub">Ø§Ù„Ù…ØªÙˆØ³Ø· ${P0(avgDailySpend)} / ÙŠÙˆÙ…</div></div>
  <div class="kpi-card"><div class="kpi-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</div><div class="kpi-value">${totalLeads}</div><div class="kpi-sub">Ø§Ù„Ù…ØªÙˆØ³Ø· ${avgDailyLeads.toFixed(1)} / ÙŠÙˆÙ…</div></div>
  <div class="kpi-card"><div class="kpi-label">ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</div><div class="kpi-value">${P(avgCPL)}</div><div class="kpi-sub">Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø±Ø¬Ø­ Ù„Ù€ ${days.length} ÙŠÙˆÙ…</div></div>
  <div class="kpi-card"><div class="kpi-label">Ø£ÙØ¶Ù„ ØªÙƒÙ„ÙØ© Ø¹Ù…ÙŠÙ„</div><div class="kpi-value" style="color:var(--green)">${P(bestCPL)}</div><div class="kpi-sub">${days[bestIdx].date} (${days[bestIdx].day})</div></div>
  <div class="kpi-card"><div class="kpi-label">Ø£Ø³ÙˆØ£ ØªÙƒÙ„ÙØ© Ø¹Ù…ÙŠÙ„</div><div class="kpi-value" style="color:var(--red)">${P(worstCPL)}</div><div class="kpi-sub">${days[worstIdx].date} (${days[worstIdx].day})</div></div>
  <div class="kpi-card"><div class="kpi-label">ÙØ¬ÙˆØ© Ø§Ù„ÙƒÙØ§Ø¡Ø©</div><div class="kpi-value">${(worstCPL/bestCPL).toFixed(1)}x</div><div class="kpi-sub">Ø§Ù„Ø£Ø³ÙˆØ£ Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø£ÙØ¶Ù„</div></div>
`;

const maxSpend=Math.max(...days.map(d=>d.spend));
const maxLead=Math.max(...days.map(d=>d.leads));
document.getElementById('spendChart').innerHTML = days.map((d,i)=>`
  <div class="bar-group">
    <div class="bar-val">${P0(d.spend)}</div>
    <div style="display:flex;gap:4px;align-items:flex-end;width:100%;justify-content:center;">
      <div class="bar" style="height:${(d.spend/maxSpend)*155}px;background:var(--accent);max-width:18px;opacity:0.8;"></div>
      <div class="bar" style="height:${(d.leads/maxLead)*155}px;background:var(--accent4);max-width:18px;opacity:0.8;"></div>
    </div>
    <div class="bar-val" style="margin-top:3px;margin-bottom:0;color:var(--accent4)">${d.leads}</div>
    <div class="bar-label">${d.date.split(' ')[0]}</div>
  </div>
`).join('');

document.getElementById('cpmChart').innerHTML = days.map((d,i)=>{
  const cpl=cpls[i], pct=(cpl/worstCPL)*100;
  const barColor=i===bestIdx?'var(--green)':i===worstIdx?'var(--red)':'var(--accent)';
  return `<div class="h-bar-row">
    <div class="h-bar-label">${d.date.split(' ')[0]}</div>
    <div class="h-bar-track"><div class="h-bar-fill" style="width:${pct}%;background:${barColor};">${P(cpl)}</div></div>
  </div>`;
}).join('');

function drawLineChart(id,values,color,prefix='EÂ£ ',dec=0){
  const el=document.getElementById(id);
  const w=500,h=180,pad={t:20,r:60,b:30,l:10};
  const maxV=Math.max(...values)*1.08, minV=0;
  const xStep=(w-pad.l-pad.r)/(values.length-1);
  const pts=values.map((v,i)=>({x:pad.l+i*xStep, y:pad.t+(1-(v-minV)/(maxV-minV))*(h-pad.t-pad.b)}));
  const polyline=pts.map(p=>`${p.x},${p.y}`).join(' ');
  const areaPath=`M${pts[0].x},${h-pad.b} ${pts.map(p=>`L${p.x},${p.y}`).join(' ')} L${pts[pts.length-1].x},${h-pad.b} Z`;
  let svg=`<svg viewBox="0 0 ${w} ${h}" preserveAspectRatio="xMidYMid meet">
    <defs><linearGradient id="g_${id}" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="${color}" stop-opacity="0.18"/>
      <stop offset="100%" stop-color="${color}" stop-opacity="0.02"/>
    </linearGradient></defs>
    <path d="${areaPath}" fill="url(#g_${id})"/>
    <polyline points="${polyline}" fill="none" stroke="${color}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>`;
  pts.forEach((p,i)=>{
    const label=dec>0?`${prefix}${values[i].toLocaleString('en',{minimumFractionDigits:dec,maximumFractionDigits:dec})}`:`${prefix}${Math.round(values[i]).toLocaleString()}`;
    svg+=`<circle cx="${p.x}" cy="${p.y}" r="4" fill="${color}" stroke="white" stroke-width="2"/>`;
    svg+=`<text x="${p.x}" y="${p.y-10}" fill="var(--text-muted)" font-size="8" text-anchor="middle" font-family="Baloo Bhaijaan 2" font-weight="600">${label}</text>`;
    svg+=`<text x="${p.x}" y="${h-8}" fill="var(--text-muted)" font-size="8" text-anchor="middle" font-family="Baloo Bhaijaan 2" font-weight="600">${days[i].date.split(' ')[0]}</text>`;
  });
  svg+=`</svg>`;
  el.innerHTML=svg;
}
drawLineChart('cumSpendChart',cumSpend,'#2563EB','EÂ£ ',0);
drawLineChart('cumMsgChart',cumLeads,'#059669','',0);

document.getElementById('tableBody').innerHTML = days.map((d,i)=>{
  const cpl=cpls[i], isBest=i===bestIdx, isWorst=i===worstIdx;
  let effClass='eff-mid',effLabel='Ù…ØªÙˆØ³Ø·';
  if(cpl<=avgCPL*0.88){effClass='eff-good';effLabel='ÙØ¹Ù‘Ø§Ù„';}
  else if(cpl>=avgCPL*1.12){effClass='eff-bad';effLabel='Ù…ÙƒÙ„Ù';}
  return `<tr>
    <td style="font-weight:700">${d.date}</td><td>${d.day}</td>
    <td>${P(d.spend)}</td><td>${d.leads}</td>
    <td class="${isBest?'best':isWorst?'worst':''}">${P(cpl)}</td>
    <td>${P(cumSpend[i])}</td><td>${cumLeads[i]}</td>
    <td>${P(runningCPL[i])}</td>
    <td><span class="eff-badge ${effClass}">${effLabel}</span></td>
  </tr>`;
}).join('');

document.getElementById('tableFoot').innerHTML=`<tr style="border-top:2px solid rgba(0,0,0,0.08);">
  <td style="font-weight:800" colspan="2">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ / Ø§Ù„Ù…ØªÙˆØ³Ø·</td>
  <td style="font-weight:800">${P(totalSpend)}</td><td style="font-weight:800">${totalLeads}</td>
  <td style="font-weight:800">${P(avgCPL)}</td><td colspan="2"></td>
  <td style="font-weight:800">${P(avgCPL)}</td><td></td>
</tr>`;

const savingsIfBest=totalSpend-(bestCPL*totalLeads);
const lastIdx=days.length-1;
const spendTrend=((days[lastIdx].spend-days[0].spend)/days[0].spend*100).toFixed(0);
document.getElementById('summary').innerHTML=`
  <h3>ğŸ“Š Ø£Ù‡Ù… Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª</h3>
  <ul>
    <li><strong>${days[bestIdx].date} (${days[bestIdx].day}) Ø£ÙØ¶Ù„ ÙŠÙˆÙ…</strong> â€” ${days[bestIdx].leads} Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ Ø¨ØªÙƒÙ„ÙØ© ${P(cpls[bestIdx])}/Ø¹Ù…ÙŠÙ„: Ø£Ø¹Ù„Ù‰ Ø­Ø¬Ù… ÙˆØ£Ù‚Ù„ ØªÙƒÙ„ÙØ©. <span class="tag tag-green">Ø£ÙØ¶Ù„ Ø¹Ø§Ø¦Ø¯</span></li>
    <li><strong>${days[worstIdx].date} (${days[worstIdx].day}) Ø£Ø³ÙˆØ£ ÙŠÙˆÙ…</strong> â€” ${days[worstIdx].leads} Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ ÙÙ‚Ø· Ø¨ØªÙƒÙ„ÙØ© ${P(cpls[worstIdx])}/Ø¹Ù…ÙŠÙ„ØŒ Ø£ØºÙ„Ù‰ Ø¨Ù€ ${(worstCPL/bestCPL).toFixed(1)} Ù…Ø±Ø© Ù…Ù† Ø£ÙØ¶Ù„ ÙŠÙˆÙ…. <span class="tag tag-red">ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©</span></li>
    <li><strong>Ø§Ù„Ø¥Ù†ÙØ§Ù‚ ÙŠØªØ¬Ù‡ Ù†Ø­Ùˆ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø¨Ù†Ø³Ø¨Ø© ${spendTrend}%</strong> Ù…Ù† ${days[0].date} Ø¥Ù„Ù‰ ${days[lastIdx].date} (${P(days[0].spend)} â†’ ${P(days[lastIdx].spend)})ØŒ Ù„ÙƒÙ† Ø­Ø¬Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† Ù„Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø²ÙŠØ§Ø¯Ø©.</li>
    <li><strong>Ø£Ø¹Ù„Ù‰ Ø¥Ù†ÙØ§Ù‚ ÙŠÙˆÙ…ÙŠ (${days[cumSpend.indexOf(Math.max(...days.map(d=>d.spend)))>=0?cumSpend.indexOf(Math.max(...days.map(d=>d.spend))):0].date} â€” ${P(Math.max(...days.map(d=>d.spend)))})</strong> ÙŠÙØ¸Ù‡Ø± Ø¹ÙˆØ§Ø¦Ø¯ Ù…ØªÙ†Ø§Ù‚ØµØ© Ø¹Ù†Ø¯ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©.</li>
    <li><strong>ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠØ© ØªØ­Ø³Ù†Øª</strong> Ù…Ù† ${P(runningCPL[0])} Ø¨Ø¹Ø¯ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„ Ø¥Ù„Ù‰ ${P(runningCPL[lastIdx])} Ø¨Ø¹Ø¯ Ø§Ù„ÙŠÙˆÙ… ${days.length}.</li>
    <li><strong>Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø­ØªÙ…Ù„:</strong> Ù„Ùˆ Ø­Ù‚Ù‚Øª ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù… ÙƒÙØ§Ø¡Ø© Ø£ÙØ¶Ù„ ÙŠÙˆÙ…ØŒ ${totalLeads} Ø¹Ù…ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ ÙƒØ§Ù†ÙˆØ§ Ø³ÙŠÙƒÙ„ÙÙˆÙ† ${P(bestCPL*totalLeads)} â€” ØªÙˆÙÙŠØ± <strong>${P(savingsIfBest)}</strong> (${(savingsIfBest/totalSpend*100).toFixed(1)}% Ù…Ù† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ).</li>
    <li><strong>Ø§Ù„ØªÙˆØµÙŠØ©:</strong> Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£ÙŠØ§Ù… Ø°Ø§Øª Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø±ØªÙØ¹Ø© ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù. Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø°ÙŠ ÙŠØ­Ù‚Ù‚ Ø£ÙØ¶Ù„ ÙƒÙØ§Ø¡Ø©.</li>
  </ul>
`;
</script>
</body>
</html>
